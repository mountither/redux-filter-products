[{"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\index.js":"1","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\reportWebVitals.js":"2","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\App.js":"3","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\store\\index.js":"4","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\utils\\history.js":"5","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\filterViews\\FilterCollection.js":"6","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\saga\\index.js":"7","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\reducers\\index.js":"8","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\initialisation\\index.js":"9","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\actions\\index.js":"10","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\reducers\\ProductFilterReducer.js":"11","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\initialisation\\filterInfo.js":"12"},{"size":592,"mtime":1624187978262,"results":"13","hashOfConfig":"14"},{"size":375,"mtime":1624187978268,"results":"15","hashOfConfig":"14"},{"size":690,"mtime":1624187978255,"results":"16","hashOfConfig":"14"},{"size":669,"mtime":1624187978270,"results":"17","hashOfConfig":"14"},{"size":89,"mtime":1624187978271,"results":"18","hashOfConfig":"14"},{"size":4463,"mtime":1632482806365,"results":"19","hashOfConfig":"14"},{"size":3219,"mtime":1632482806379,"results":"20","hashOfConfig":"14"},{"size":209,"mtime":1632482806375,"results":"21","hashOfConfig":"14"},{"size":369,"mtime":1624187978263,"results":"22","hashOfConfig":"14"},{"size":999,"mtime":1632482806358,"results":"23","hashOfConfig":"14"},{"size":5107,"mtime":1632482806373,"results":"24","hashOfConfig":"14"},{"size":3477,"mtime":1632482806368,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"11mwr6k",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"28"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"28"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"28"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"28"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\index.js",[],["55","56"],"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\reportWebVitals.js",[],"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\App.js",["57","58","59"],"import logo from './logo.svg';\r\nimport './App.css';\r\nimport FilterCollection from './filterViews/FilterCollection'\r\nimport { Switch, Route, Router, Link} from 'react-router-dom';\r\nimport history from './utils/history'\r\nimport { connect } from \"react-redux\";\r\nimport store from './store'\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Router history={history}>\r\n        <Switch>\r\n          <Route exact path='/' render={() => <Link to=\"/products/\">Products</Link>}/>      \r\n          <Route exact path='/products/' \r\n            render={() => <FilterCollection />}\r\n            /> \r\n\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\store\\index.js",[],"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\utils\\history.js",[],"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\filterViews\\FilterCollection.js",["60"],"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\saga\\index.js",["61","62","63","64","65"],"import { takeEvery, put, select, all, call, fork } from 'redux-saga/effects';\r\nimport { useLocation} from 'react-router-dom'\r\nimport {fetchProductsIfNeeded, fetchProducts, initFilters, urlChange, receiveProducts, requestProducts} from '../actions';\r\nimport qs from \"query-string\";\r\nimport {limitInit} from '../initialisation'\r\n\r\n// this solves the issue of taking query direct from the window location, \r\n// rather than the redux router state.\r\n// when the init_app dispatch is used, the router values will be present,\r\n// we can alter and add the necessary values with this method.\r\nfunction* initProductsPage() {\r\n\r\n    const queryURL = qs.parse(window.location.search,{parseNumbers: true, arrayFormat: 'comma'});\r\n\r\n    const pageNo = parseInt(queryURL.page) || 1;\r\n\r\n            \r\n    if(Object.keys(queryURL).length> 0){\r\n\r\n        Object.keys(queryURL).map( field =>\r\n            queryURL[field]= Array.isArray(queryURL[field]) ? queryURL[field] : [queryURL[field]]\r\n        )\r\n        \r\n        yield put(initFilters(queryURL))\r\n    }        \r\n\r\n    yield put({type:'GET_PRODUCTS', \r\n            config: {\r\n                skip: 0,\r\n                limit: limitInit * pageNo,\r\n                page: pageNo,\r\n                initUrl: true,\r\n            }\r\n    })\r\n\r\n    return;\r\n}\r\n\r\n\r\nexport const getOutcome = (state) => state.outcome\r\n\r\nfunction* processProducts(action){\r\n    console.log('ACTION IN SAGA ',action);\r\n\r\n    try {\r\n        // get the current state \r\n        let outcome = yield select(getOutcome);\r\n        \r\n        // strigfy the params found in state and send in url change\r\n        const queryFilters = qs.stringify(outcome.meta.params,\r\n            {arrayFormat: 'comma', skipNull: true, skipEmptyString: true});\r\n        \r\n            //call getProducts to return response. \r\n        const response = yield call(getProducts, queryFilters, action.config)\r\n\r\n        // check if success. if so, dispatch actions\r\n        if (response.status >= 200 && response.status < 300) {    \r\n            const products = yield response.json()\r\n            yield put(requestProducts())\r\n            yield put(receiveProducts(products, action.config, outcome))\r\n            yield put(urlChange(queryFilters, {\r\n                    urlConfig: \r\n                        {\r\n                            loadMore: action.config.loadMore, \r\n                            initUrl: action.config.initUrl\r\n                        }\r\n                    }))\r\n        }\r\n        else{\r\n            throw response.statusText;\r\n        }\r\n\r\n    } \r\n    catch (error) {\r\n        console.log(error);\r\n    }\r\n\r\n}\r\n\r\nconst getProducts = (query, config) =>{\r\n    \r\n\r\n    const url = `${process.env.REACT_APP_SERVER}:8000/api/products/?${query}&skip=${config.skip}&limit=${config.limit}`\r\n    \r\n    const queryToServer = qs.exclude(url, ['page']);\r\n    return fetch(queryToServer)\r\n        .then(response => response)\r\n}\r\n\r\n\r\n//this the watcher in middleware. \r\n// focuses on action \"INIT_APP\".\r\n// watcher saga will include other actions ('REQUEST_PRODUCTS') \r\nfunction* mySaga() {\r\n    yield takeEvery(\"INIT_PRODUCTS\", initProductsPage);\r\n    yield takeEvery(\"GET_PRODUCTS\", processProducts);\r\n\r\n}\r\n\r\nexport default mySaga;","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\reducers\\index.js",["66","67"],"import { combineReducers } from 'redux';\r\nimport {outcome, fetchedProducts, filterUrl} from './ProductFilterReducer';\r\n\r\nconst  allReducers = combineReducers({ \r\n    outcome\r\n});\r\n\r\nexport default allReducers;","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\initialisation\\index.js",[],"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\actions\\index.js",[],"C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\reducers\\ProductFilterReducer.js",["68","69"],"import {initState} from '../initialisation'\r\n\r\nexport const outcome = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case 'INIT_FILTER_UI':\r\n            // exclude page from params obj, since its not needed after init (page in state will be used)\r\n            const {page, ...updatedParams} = action.urlFilters\r\n            return {\r\n                ...state,\r\n                meta: {\r\n                ...state.meta,\r\n                params: {...state.meta.params, ...updatedParams},\r\n                },\r\n                filters: state.filters.map( filter => {\r\n                    const foundField = Object.keys(action.urlFilters).find(field => \r\n                        field === filter.field_name\r\n                    )\r\n                    if(foundField){\r\n                        return{\r\n                        ...filter,\r\n                        input: filter.input.map((dataInput) => {\r\n\r\n                        const foundInput = Array.isArray(action.urlFilters[filter.field_name]) ? \r\n                            action.urlFilters[filter.field_name].find((input) => input == dataInput.id) \r\n                            : \r\n                            action.urlFilters[filter.field_name] === dataInput.id;\r\n\r\n                        if(foundInput){\r\n                            return {\r\n                            ...dataInput,\r\n                            active: true,\r\n                            }\r\n                        }\r\n                        return dataInput\r\n                        }),\r\n                        }\r\n                    }\r\n                    return filter\r\n                }),\r\n            }\r\n        case 'TOGGLE_FILTER':\r\n            return {\r\n                ...state,\r\n                meta: {\r\n                ...state.meta,\r\n                params: {\r\n                    ...state.meta.params,\r\n                    [action.field]: action.deselect ? state.meta.params[action.field].filter(input => input != action.id)\r\n                    : [...state.meta.params[action.field], action.id]\r\n                },\r\n                status: 'TOGGLING_UI',\r\n                },\r\n                filters: state.filters.map((filter) =>{\r\n                if(filter.field_name === action.field){\r\n                return {\r\n                    ...filter,\r\n                    input: filter.input.map((dataInput) => {\r\n                    if(dataInput.id === action.id){\r\n                        return {\r\n                        ...dataInput,\r\n                        active: action.deselect ? false : true,\r\n                        }\r\n                    }\r\n                    return dataInput\r\n                    }),\r\n                }\r\n                }\r\n                return filter;\r\n            },\r\n            ),\r\n            }\r\n        case 'REQUEST_PRODUCTS':\r\n            return {\r\n                ...state,\r\n                isFetching: true,\r\n            }\r\n        case 'RECEIVE_PRODUCTS':\r\n            console.log('state parrams in recieve',state.meta);\r\n            return {\r\n                ...state,\r\n                meta: {\r\n                    ...state.meta,\r\n                    count: action.meta.count,\r\n                    page: action.meta.page,\r\n                    skip: action.meta.skip,\r\n                    limit: action.meta.limit,\r\n                    loadMore: action.meta.loadMore,\r\n                    params: action.meta.params,\r\n                },\r\n                isFetching: false,\r\n                data: action.meta.loadMore ? [...state.data, ...action.data]: action.data,\r\n            }\r\n        case 'WINDOW_NAV':\r\n            return action.oldState && Object.keys(action.oldState).length ? action.oldState : state;\r\n        case 'REGISTER_URL':\r\n            if(window.history){\r\n                //  push state keeps old entry in browser. non-mutated state\r\n                if(!action.initUrl){\r\n                    window.history.pushState({state: state}, '', `/products/${\r\n                        Object.keys(state.meta.params).some((filter) => state.meta.params[filter].length) \r\n                        ? \r\n                        '?'+action.url: ''}`)\r\n                }   \r\n                else{\r\n                    //  when the page loads without \r\n                    window.history.replaceState({state: state}, '',  `/products/${\r\n                        action.url\r\n                        ?\r\n                        '?'+action.url: ''}`\r\n                    )\r\n                }\r\n            }\r\n            // after completing state manip. return current state. If not, the state will not be realised by other actions\r\n            return state\r\n\r\n        case 'APPEND_PAGE_URL':\r\n            console.log('STATE IN URL CHNA',action.url);\r\n            if(window.history){\r\n                window.history.replaceState({state: state}, '', `/products/?${action.url ? action.url+'&': ''}page=${state.meta.page}`)\r\n            }\r\n            return state\r\n        // case 'CLEAR_FILTERS':\r\n        //     return {...state, data: [], filters: []}\r\n        default:\r\n            return state\r\n    }\r\n} \r\n","C:\\Users\\M_A\\Documents\\reactjs-testings\\redux-filter-products\\client\\src\\initialisation\\filterInfo.js",[],{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","replacedBy":"73"},{"ruleId":"74","severity":1,"message":"75","line":1,"column":8,"nodeType":"76","messageId":"77","endLine":1,"endColumn":12},{"ruleId":"74","severity":1,"message":"78","line":6,"column":10,"nodeType":"76","messageId":"77","endLine":6,"endColumn":17},{"ruleId":"74","severity":1,"message":"79","line":7,"column":8,"nodeType":"76","messageId":"77","endLine":7,"endColumn":13},{"ruleId":"80","severity":1,"message":"81","line":34,"column":8,"nodeType":"82","endLine":34,"endColumn":10,"suggestions":"83"},{"ruleId":"74","severity":1,"message":"84","line":1,"column":34,"nodeType":"76","messageId":"77","endLine":1,"endColumn":37},{"ruleId":"74","severity":1,"message":"85","line":1,"column":45,"nodeType":"76","messageId":"77","endLine":1,"endColumn":49},{"ruleId":"74","severity":1,"message":"86","line":2,"column":10,"nodeType":"76","messageId":"77","endLine":2,"endColumn":21},{"ruleId":"74","severity":1,"message":"87","line":3,"column":9,"nodeType":"76","messageId":"77","endLine":3,"endColumn":30},{"ruleId":"74","severity":1,"message":"88","line":3,"column":32,"nodeType":"76","messageId":"77","endLine":3,"endColumn":45},{"ruleId":"74","severity":1,"message":"89","line":2,"column":18,"nodeType":"76","messageId":"77","endLine":2,"endColumn":33},{"ruleId":"74","severity":1,"message":"90","line":2,"column":35,"nodeType":"76","messageId":"77","endLine":2,"endColumn":44},{"ruleId":"91","severity":1,"message":"92","line":24,"column":88,"nodeType":"93","messageId":"94","endLine":24,"endColumn":90},{"ruleId":"91","severity":1,"message":"95","line":48,"column":109,"nodeType":"93","messageId":"94","endLine":48,"endColumn":111},"no-native-reassign",["96"],"no-negated-in-lhs",["97"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'connect' is defined but never used.","'store' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["98"],"'all' is defined but never used.","'fork' is defined but never used.","'useLocation' is defined but never used.","'fetchProductsIfNeeded' is defined but never used.","'fetchProducts' is defined but never used.","'fetchedProducts' is defined but never used.","'filterUrl' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","no-global-assign","no-unsafe-negation",{"desc":"99","fix":"100"},"Update the dependencies array to be: [dispatch]",{"range":"101","text":"102"},[943,945],"[dispatch]"]